@page "/Settings"
@rendermode InteractiveServer
@using System.Globalization
@inject NavigationManager Nav

<div class="background">
    <div class="heading">
        <h1><b>Settings</b></h1>
    </div>

    <div class="panel1">
        <h2><b>Language</b></h2>

        <select @bind="SelectedLang" class="form-select mb-3">
            <option value="en-US">English (United States)</option>
            <option value="en-GB">English (United Kingdom)</option>
            <option value="ar">العربية (Arabic)</option>
            <option value="ar-AE">العربية - الإمارات (Arabic - UAE)</option>
            <option value="ca">Català (Catalan)</option>
            <option value="cs">Čeština (Czech)</option>
            <option value="da">Dansk (Danish)</option>
            <option value="de">Deutsch (German)</option>
            <option value="el-GR">Ελληνικά (Greek)</option>
            <option value="es">Español (Spanish)</option>
            <option value="fa">فارسی (Persian)</option>
            <option value="fi">Suomi (Finnish)</option>
            <option value="fr">Français (French)</option>
            <option value="fr-CH">Français - Suisse (French - Switzerland)</option>
            <option value="he">עברית (Hebrew)</option>
            <option value="hi-IN">हिन्दी (Hindi)</option>
            <option value="hr">Hrvatski (Croatian)</option>
            <option value="hu">Magyar (Hungarian)</option>
            <option value="id">Bahasa Indonesia (Indonesian)</option>
            <option value="it">Italiano (Italian)</option>
            <option value="ja">日本語 (Japanese)</option>
            <option value="ko">한국어 (Korean)</option>
            <option value="ms">Bahasa Melayu (Malay)</option>
            <option value="nb">Norsk Bokmål (Norwegian)</option>
            <option value="nl">Nederlands (Dutch)</option>
            <option value="pl">Polski (Polish)</option>
            <option value="pt">Português (Portuguese)</option>
            <option value="pt-BR">Português - Brasil (Portuguese - Brazil)</option>
            <option value="ro">Română (Romanian)</option>
            <option value="ru">Русский (Russian)</option>
            <option value="sk">Slovenčina (Slovak)</option>
            <option value="sv">Svenska (Swedish)</option>
            <option value="th">ไทย (Thai)</option>
            <option value="tr">Türkçe (Turkish)</option>
            <option value="vi">Tiếng Việt (Vietnamese)</option>
            <option value="zh">中文 (Chinese)</option>
        </select>

        <button class="btn btn-primary" @onclick="ApplyLanguage">Apply Language</button>
        
        <div class="mt-3">
            <p>Current Language: <strong>@GetCurrentLanguageName()</strong></p>
            <p class="text-muted small">Note: Some content may be translated automatically using external services.</p>
        </div>
    </div>
</div>

@code {
    private string SelectedLang = "en-US";

    protected override void OnInitialized()
    {
        SelectedLang = CultureInfo.CurrentUICulture.Name;
    }

    private void ApplyLanguage()
    {
        Nav.NavigateTo($"/?culture={SelectedLang}", forceLoad: true);
    }

    private string GetCurrentLanguageName()
    {
        var languageNames = new Dictionary<string, string>
        {
            ["en-US"] = "English (United States)",
            ["en-GB"] = "English (United Kingdom)",
            ["ar"] = "العربية (Arabic)",
            ["ar-AE"] = "العربية - الإمارات (Arabic - UAE)",
            ["ca"] = "Català (Catalan)",
            ["cs"] = "Čeština (Czech)",
            ["da"] = "Dansk (Danish)",
            ["de"] = "Deutsch (German)",
            ["el-GR"] = "Ελληνικά (Greek)",
            ["es"] = "Español (Spanish)",
            ["fa"] = "فارسی (Persian)",
            ["fi"] = "Suomi (Finnish)",
            ["fr"] = "Français (French)",
            ["fr-CH"] = "Français - Suisse (French - Switzerland)",
            ["he"] = "עברית (Hebrew)",
            ["hi-IN"] = "हिन्दी (Hindi)",
            ["hr"] = "Hrvatski (Croatian)",
            ["hu"] = "Magyar (Hungarian)",
            ["id"] = "Bahasa Indonesia (Indonesian)",
            ["it"] = "Italiano (Italian)",
            ["ja"] = "日本語 (Japanese)",
            ["ko"] = "한국어 (Korean)",
            ["ms"] = "Bahasa Melayu (Malay)",
            ["nb"] = "Norsk Bokmål (Norwegian)",
            ["nl"] = "Nederlands (Dutch)",
            ["pl"] = "Polski (Polish)",
            ["pt"] = "Português (Portuguese)",
            ["pt-BR"] = "Português - Brasil (Portuguese - Brazil)",
            ["ro"] = "Română (Romanian)",
            ["ru"] = "Русский (Russian)",
            ["sk"] = "Slovenčina (Slovak)",
            ["sv"] = "Svenska (Swedish)",
            ["th"] = "ไทย (Thai)",
            ["tr"] = "Türkçe (Turkish)",
            ["vi"] = "Tiếng Việt (Vietnamese)",
            ["zh"] = "中文 (Chinese)"
        };

        return languageNames.GetValueOrDefault(CultureInfo.CurrentUICulture.Name, CultureInfo.CurrentUICulture.DisplayName);
    }
}
